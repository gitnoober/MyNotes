{"ast":null,"code":"import _asyncToGenerator from\"/home/ps/Documents/notestest/notesfrontendtest/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/ps/Documents/notestest/notesfrontendtest/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/ps/Documents/notestest/notesfrontendtest/node_modules/@babel/runtime/regenerator/index.js\";import React,{useState,useEffect,useContext}from'react';import AuthContext from'../context/AuthContext';import ListItem from'../components/ListItem';import AddButton from'../components/AddButton';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var HomePage=function HomePage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),notes=_useState2[0],setNotes=_useState2[1];var _useContext=useContext(AuthContext),authTokens=_useContext.authTokens,logoutUser=_useContext.logoutUser;useEffect(function(){getNotes();},[]);var getNotes=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('/api/notes/',{method:'GET',headers:{'Content-Type':'application/json','Authorization':'Bearer '+String(authTokens.access)}});case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;if(response.status===200){setNotes(data);}else if(response.statusText==='Unauthorized'){logoutUser();}else{alert('Something went wrong');}case 7:case\"end\":return _context.stop();}}},_callee);}));return function getNotes(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"notes\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"notes-header\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"notes-title\",children:\"\\u2636 Notes\"}),/*#__PURE__*/_jsx(\"p\",{className:\"notes-count\",children:notes.length})]}),/*#__PURE__*/_jsx(\"div\",{className:\"notes-list\",children:notes.map(function(note,index){return/*#__PURE__*/_jsx(ListItem,{note:note},index);})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(AddButton,{})})]});};export default HomePage;","map":{"version":3,"sources":["/home/ps/Documents/notestest/notesfrontendtest/src/pages/HomePage.js"],"names":["React","useState","useEffect","useContext","AuthContext","ListItem","AddButton","HomePage","notes","setNotes","authTokens","logoutUser","getNotes","fetch","method","headers","String","access","response","json","data","status","statusText","alert","length","map","note","index"],"mappings":"+YAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,CAAoCC,UAApC,KAAqD,OAArD,CACA,MAAOC,CAAAA,WAAP,KAAwB,wBAAxB,CACA,MAAOC,CAAAA,QAAP,KAAqB,wBAArB,CACA,MAAOC,CAAAA,SAAP,KAAsB,yBAAtB,C,wFAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CAErB,cAAwBN,QAAQ,CAAC,EAAD,CAAhC,wCAAKO,KAAL,eAAYC,QAAZ,eACA,gBAA+BN,UAAU,CAACC,WAAD,CAAzC,CAAKM,UAAL,aAAKA,UAAL,CAAiBC,UAAjB,aAAiBA,UAAjB,CAEAT,SAAS,CAAC,UAAI,CACZU,QAAQ,GACT,CAFQ,CAEN,EAFM,CAAT,CAIA,GAAIA,CAAAA,QAAQ,0FAAG,2KACQC,CAAAA,KAAK,CAAC,aAAD,CAAgB,CACxCC,MAAM,CAAC,KADiC,CAExCC,OAAO,CAAC,CACN,eAAiB,kBADX,CAEN,gBAAkB,UAAYC,MAAM,CAACN,UAAU,CAACO,MAAZ,CAF9B,CAFgC,CAAhB,CADb,QACTC,QADS,qCAQIA,CAAAA,QAAQ,CAACC,IAAT,EARJ,QAQTC,IARS,eASb,GAAIF,QAAQ,CAACG,MAAT,GAAoB,GAAxB,CAA4B,CAC1BZ,QAAQ,CAACW,IAAD,CAAR,CACD,CAFD,IAEM,IAAIF,QAAQ,CAACI,UAAT,GAAwB,cAA5B,CAA2C,CAC/CX,UAAU,GACX,CAFK,IAGF,CACFY,KAAK,CAAC,sBAAD,CAAL,CACD,CAhBY,sDAAH,kBAARX,CAAAA,QAAQ,0CAAZ,CAqBA,mBACE,aAAK,SAAS,CAAC,OAAf,wBACI,aAAK,SAAS,CAAC,cAAf,wBACE,WAAI,SAAS,CAAC,aAAd,0BADF,cAEE,UAAG,SAAS,CAAC,aAAb,UAA4BJ,KAAK,CAACgB,MAAlC,EAFF,GADJ,cAMI,YAAK,SAAS,CAAC,YAAf,UACGhB,KAAK,CAACiB,GAAN,CAAU,SAACC,IAAD,CAAMC,KAAN,qBACT,KAAC,QAAD,EAAsB,IAAI,CAAED,IAA5B,EAAeC,KAAf,CADS,EAAV,CADH,EANJ,cAYI,kCACE,KAAC,SAAD,IADF,EAZJ,GADF,CAiBD,CA/CD,CAiDA,cAAepB,CAAAA,QAAf","sourcesContent":["import React, {useState, useEffect, useContext} from 'react';\nimport AuthContext from '../context/AuthContext';\nimport ListItem from '../components/ListItem';\nimport AddButton from '../components/AddButton';\n\nconst HomePage = () => {\n\n  let [notes, setNotes] = useState([])\n  let {authTokens, logoutUser} = useContext(AuthContext)\n\n  useEffect(()=>{\n    getNotes()\n  }, [])\n\n  let getNotes = async() => {\n    let response = await fetch('/api/notes/', {\n      method:'GET',\n      headers:{\n        'Content-Type' : 'application/json',\n        'Authorization' : 'Bearer ' + String(authTokens.access)\n      }\n    })\n    let data = await response.json()\n    if (response.status === 200){\n      setNotes(data)  \n    }else if (response.statusText === 'Unauthorized'){\n      logoutUser()\n    }\n    else{\n      alert('Something went wrong')\n    }\n  }\n\n\n  \n  return (\n    <div className='notes'>\n        <div className='notes-header'>\n          <h2 className='notes-title' >&#9782; Notes</h2>\n          <p className='notes-count'>{notes.length}</p>\n        </div>\n\n        <div className='notes-list'>\n          {notes.map((note,index) => (\n            <ListItem key={index} note={note}/>\n          ))}\n        </div>\n        \n        <div>\n          <AddButton/>\n        </div>\n    </div>);\n};\n\nexport default HomePage;\n"]},"metadata":{},"sourceType":"module"}